<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Black Market Brief</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root{
      --blue:#1b4cff;
      --red:#d61f2c;
      --muted:#333;
      --thin:#e9e9e9;
    }

    /* Mobile-first */
    body {
      background:#fff;
      color:#000;
      font-family: Arial, Helvetica, sans-serif;
      margin:0;
      padding:14px 12px;               /* tighter mobile margins */
      max-width: 900px;
      margin-left:auto;
      margin-right:auto;
      -webkit-text-size-adjust: 100%;
    }

    h1 {
      text-align:center;
      font-size:42px;                  /* smaller on mobile */
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 3px;
      font-style: italic;
      transform: skew(-8deg);
      margin: 8px 0 8px;

      text-shadow:
        2px 2px 0 var(--blue),
        4px 4px 0 var(--red),
        6px 6px 0 rgba(0,0,0,0.18);
    }

    .subhead {
      text-align:center;
      font-size: 13px;
      font-weight: 800;
      margin: 0 0 12px;
      letter-spacing: 0.8px;
      text-transform: uppercase;
      color:#111;
    }

    .meta {
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap:10px;
      font-size: 12px;
      color: var(--muted);
      margin: 8px 0 14px;
      flex-wrap: wrap;                 /* prevents overflow on small screens */
    }

    .pill {
      border: 1px solid var(--thin);
      padding: 6px 10px;
      border-radius: 999px;
      font-weight: 800;
      letter-spacing: 0.4px;
      text-transform: uppercase;
      background: #fafafa;
    }

    ul {
      list-style:none;
      padding:0;
      margin:0;
    }

    /* No dividers/lines between items */
    li {
      margin: 0 0 14px;                /* whitespace only */
      font-size: 17px;
      line-height: 1.25;
    }

    a {
      color:#000;
      text-decoration: underline;
      font-weight: 900;
      display: inline;                 /* avoid weird block spacing on mobile */
      word-break: break-word;          /* prevent overflow from long titles */
    }

    a:hover { color:#0033cc; }

    .footer {
      text-align:center;
      margin-top: 26px;
      font-size: 13px;
      color: var(--muted);
    }

    .footer a {
      color:#0040ff;
      text-decoration: underline;
      font-weight: 800;
    }

    .footer a:hover { color:#cc0000; }

    /* Tablet / desktop enhancements */
    @media (min-width: 700px) {
      body { padding: 20px; }
      h1 { font-size: 54px; letter-spacing: 4px; margin: 10px 0 10px; }
      .subhead { font-size: 16px; margin-bottom: 18px; }
      .meta { font-size: 13px; margin-bottom: 16px; flex-wrap: nowrap; }
      li { font-size: 18px; margin-bottom: 12px; line-height: 1.3; }
    }
  </style>
</head>

<body>
  <h1>BLACK MARKET BRIEF</h1>
  <div class="subhead">Disrupting the Illegal Chinese Vape Supply Chain • Protecting Communities</div>

  <div class="meta">
    <div class="pill">Live Desk</div>
    <div id="last-updated">Updated: —</div>
  </div>

  <ul id="headline-list">
    <li>Loading headlines…</li>
  </ul>

  <script>
    const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTz6qSLgIjDAsDkravmNu3PKrXbDHyGfKHAEY5r0Tyg0ot0co7rCX_S0Y5XtDgOQ34q0DBH1o1tRbbE/pub?output=tsv";

    function parseTSV(text) {
      const lines = text.trim().split(/\r?\n/);
      if (lines.length <= 1) return [];
      return lines.slice(1).map(line => {
        const parts = line.split("\t");
        const title = (parts[0] || "").trim().replace(/^"|"$/g, "");
        const url   = (parts[1] || "").trim().replace(/^"|"$/g, "");
        return { title, url };
      }).filter(r => r.title && r.url);
    }

    fetch(SHEET_URL)
      .then(res => res.text())
      .then(text => {
        const entries = parseTSV(text);
        const listEl = document.getElementById("headline-list");
        listEl.innerHTML = "";

        entries.slice(0, 150).forEach(item => {
          const li = document.createElement("li");
          const a = document.createElement("a");
          a.href = item.url;
          a.target = "_blank";
          a.rel = "noopener noreferrer";
          a.textContent = item.title;
          li.appendChild(a);
          listEl.appendChild(li);
        });

        document.getElementById("last-updated").textContent =
          "Updated: " + new Date().toLocaleString();
      })
      .catch(err => {
        console.error("Error loading sheet:", err);
        document.getElementById("headline-list").innerHTML =
          "<li>Unable to load headlines.</li>";
      });
  </script>

  <div class="footer">
    Built to track contraband enforcement actions.
  </div>
</body>
</html>
